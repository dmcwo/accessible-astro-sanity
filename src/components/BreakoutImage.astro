---
import { Image } from 'astro:assets'

/**
 * BreakoutImage Component
 *
 * @description A component for displaying a landscape image that breaks out of the container
 */
interface Props {
  /**
   * The image source
   */
  src: string
  /**
   * The image alt text
   */
  alt?: string
  /**
   * Optional visible caption for the image
   */
  caption?: string
  /**
   * Visual style preset for the caption
   */
  captionType?: 'minimal' | 'harmonized' | 'editorial'
}

const { src, alt = '', caption, captionType = 'minimal' } = Astro.props

// Map captionType to Tailwind classes
const captionClass = captionType === 'harmonized'
  ? 'mt-3 text-sm md:text-base leading-7 text-slate-700 dark:text-slate-300 max-w-[65ch] mx-auto text-center md:text-left'
  : captionType === 'editorial'
  ? 'mt-3 text-base leading-7 italic font-medium text-slate-700 dark:text-slate-200 max-w-[65ch] mx-auto text-center'
  : 'mt-2 text-sm leading-6 text-slate-600 dark:text-slate-400'
---

<figure class="relative -mx-4 my-8 md:-mx-8 lg:-mx-[120px]">
  <Image src={src} alt={alt} width={1400} height={700} class="h-auto w-full rounded-lg object-cover" loading="lazy" />
  <div class="absolute inset-0 rounded-lg shadow-inner"></div>

  {caption ? (
    <figcaption class={captionClass}>
      {caption}
    </figcaption>
  ) : null}
</figure>
